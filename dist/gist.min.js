!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Gist=t():e.Gist=t()}(this,(()=>(()=>{var e={505:(e,t,n)=>{e.exports=n(15)},592:(e,t,n)=>{"use strict";var r=n(516),s=n(522),i=n(948),o=n(106),a=n(615),u=n(631),c=n(202),l=n(896),d=n(845),f=n(563),p=n(656),g=n(721);e.exports=function(e){return new Promise((function(t,n){var h,m=e.data,v=e.headers,y=e.responseType,w=e.withXSRFToken;function b(){e.cancelToken&&e.cancelToken.unsubscribe(h),e.signal&&e.signal.removeEventListener("abort",h)}r.isFormData(m)&&r.isStandardBrowserEnv()&&delete v["Content-Type"];var x=new XMLHttpRequest;if(e.auth){var E=e.auth.username||"",S=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";v.Authorization="Basic "+btoa(E+":"+S)}var R=a(e.baseURL,e.url);function O(){if(x){var r="getAllResponseHeaders"in x?u(x.getAllResponseHeaders()):null,i={data:y&&"text"!==y&&"json"!==y?x.response:x.responseText,status:x.status,statusText:x.statusText,headers:r,config:e,request:x};s((function(e){t(e),b()}),(function(e){n(e),b()}),i),x=null}}if(x.open(e.method.toUpperCase(),o(R,e.params,e.paramsSerializer),!0),x.timeout=e.timeout,"onloadend"in x?x.onloadend=O:x.onreadystatechange=function(){x&&4===x.readyState&&(0!==x.status||x.responseURL&&0===x.responseURL.indexOf("file:"))&&setTimeout(O)},x.onabort=function(){x&&(n(new d("Request aborted",d.ECONNABORTED,e,x)),x=null)},x.onerror=function(){n(new d("Network Error",d.ERR_NETWORK,e,x)),x=null},x.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||l;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new d(t,r.clarifyTimeoutError?d.ETIMEDOUT:d.ECONNABORTED,e,x)),x=null},r.isStandardBrowserEnv()&&(w&&r.isFunction(w)&&(w=w(e)),w||!1!==w&&c(R))){var I=e.xsrfHeaderName&&e.xsrfCookieName&&i.read(e.xsrfCookieName);I&&(v[e.xsrfHeaderName]=I)}"setRequestHeader"in x&&r.forEach(v,(function(e,t){void 0===m&&"content-type"===t.toLowerCase()?delete v[t]:x.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(x.withCredentials=!!e.withCredentials),y&&"json"!==y&&(x.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&x.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&x.upload&&x.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(h=function(t){x&&(n(!t||t.type?new f(null,e,x):t),x.abort(),x=null)},e.cancelToken&&e.cancelToken.subscribe(h),e.signal&&(e.signal.aborted?h():e.signal.addEventListener("abort",h))),m||!1===m||0===m||""===m||(m=null);var T=p(R);T&&-1===g.protocols.indexOf(T)?n(new d("Unsupported protocol "+T+":",d.ERR_BAD_REQUEST,e)):x.send(m)}))}},15:(e,t,n)=>{"use strict";var r=n(516),s=n(12),i=n(155),o=n(343),a=n(412),u=n(298),c=function e(t){var n=new i(t),a=s(i.prototype.request,n);return r.extend(a,i.prototype,n),r.extend(a,n),a.create=function(n){return e(o(t,n))},a}(a);c.Axios=i,c.CanceledError=n(563),c.CancelToken=n(191),c.isCancel=n(864),c.VERSION=n(641).version,c.toFormData=n(440),c.AxiosError=n(845),c.Cancel=c.CanceledError,c.all=function(e){return Promise.all(e)},c.spread=n(980),c.isAxiosError=n(19),c.formToJSON=function(e){return u(r.isHTMLForm(e)?new FormData(e):e)},e.exports=c,e.exports.default=c},191:(e,t,n)=>{"use strict";var r=n(563);function s(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){for(var t=n._listeners.length;t-- >0;)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,s,i){n.reason||(n.reason=new r(e,s,i),t(n.reason))}))}s.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},s.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},s.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},s.source=function(){var e;return{token:new s((function(t){e=t})),cancel:e}},e.exports=s},563:(e,t,n)=>{"use strict";var r=n(845);function s(e,t,n){r.call(this,null==e?"canceled":e,r.ERR_CANCELED,t,n),this.name="CanceledError"}n(516).inherits(s,r,{__CANCEL__:!0}),e.exports=s},864:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},155:(e,t,n)=>{"use strict";var r=n(516),s=n(106),i=n(471),o=n(490),a=n(343),u=n(615),c=n(841),l=c.validators;function d(e){this.defaults=e,this.interceptors={request:new i,response:new i}}d.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var s=t.paramsSerializer;void 0!==s&&c.assertOptions(s,{encode:l.function,serialize:l.function},!0),r.isFunction(s)&&(t.paramsSerializer={serialize:s});var i=[],u=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(u=u&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));var d,f=[];if(this.interceptors.response.forEach((function(e){f.push(e.fulfilled,e.rejected)})),!u){var p=[o,void 0];for(Array.prototype.unshift.apply(p,i),p=p.concat(f),d=Promise.resolve(t);p.length;)d=d.then(p.shift(),p.shift());return d}for(var g=t;i.length;){var h=i.shift(),m=i.shift();try{g=h(g)}catch(e){m(e);break}}try{d=o(g)}catch(e){return Promise.reject(e)}for(;f.length;)d=d.then(f.shift(),f.shift());return d},d.prototype.getUri=function(e){e=a(this.defaults,e);var t=u(e.baseURL,e.url);return s(t,e.params,e.paramsSerializer)},r.forEach(["delete","get","head","options"],(function(e){d.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,s){return this.request(a(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}d.prototype[e]=t(),d.prototype[e+"Form"]=t(!0)})),e.exports=d},845:(e,t,n)=>{"use strict";var r=n(516);function s(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}r.inherits(s,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var i=s.prototype,o={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){o[e]={value:e}})),Object.defineProperties(s,o),Object.defineProperty(i,"isAxiosError",{value:!0}),s.from=function(e,t,n,o,a,u){var c=Object.create(i);return r.toFlatObject(e,c,(function(e){return e!==Error.prototype})),s.call(c,e.message,t,n,o,a),c.cause=e,c.name=e.name,u&&Object.assign(c,u),c},e.exports=s},471:(e,t,n)=>{"use strict";var r=n(516);function s(){this.handlers=[]}s.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},s.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},s.prototype.clear=function(){this.handlers&&(this.handlers=[])},s.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=s},615:(e,t,n)=>{"use strict";var r=n(137),s=n(680);e.exports=function(e,t){return e&&!r(t)?s(e,t):t}},490:(e,t,n)=>{"use strict";var r=n(516),s=n(881),i=n(864),o=n(412),a=n(563),u=n(18);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=s.call(e,e.data,e.headers,null,e.transformRequest),u(e.headers,"Accept"),u(e.headers,"Content-Type"),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return c(e),t.data=s.call(e,t.data,t.headers,t.status,e.transformResponse),t}),(function(t){return i(t)||(c(e),t&&t.response&&(t.response.data=s.call(e,t.response.data,t.response.headers,t.response.status,e.transformResponse))),Promise.reject(t)}))}},343:(e,t,n)=>{"use strict";var r=n(516);e.exports=function(e,t){t=t||{};var n={};function s(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isEmptyObject(t)?r.merge({},e):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function i(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:s(void 0,e[n]):s(e[n],t[n])}function o(e){if(!r.isUndefined(t[e]))return s(void 0,t[e])}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:s(void 0,e[n]):s(void 0,t[n])}function u(n){return n in t?s(e[n],t[n]):n in e?s(void 0,e[n]):void 0}var c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||i,s=t(e);r.isUndefined(s)&&t!==u||(n[e]=s)})),n}},522:(e,t,n)=>{"use strict";var r=n(845);e.exports=function(e,t,n){var s=n.config.validateStatus;n.status&&s&&!s(n.status)?t(new r("Request failed with status code "+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},881:(e,t,n)=>{"use strict";var r=n(516),s=n(412);e.exports=function(e,t,n,i){var o=this||s;return r.forEach(i,(function(r){e=r.call(o,e,t,n)})),e}},412:(e,t,n)=>{"use strict";var r=n(516),s=n(18),i=n(845),o=n(896),a=n(440),u=n(69),c=n(721),l=n(298),d={"Content-Type":"application/x-www-form-urlencoded"};function f(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var p,g={transitional:o,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(p=n(592)),p),transformRequest:[function(e,t){s(t,"Accept"),s(t,"Content-Type");var n,i=t&&t["Content-Type"]||"",o=i.indexOf("application/json")>-1,c=r.isObject(e);if(c&&r.isHTMLForm(e)&&(e=new FormData(e)),r.isFormData(e))return o?JSON.stringify(l(e)):e;if(r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e))return e;if(r.isArrayBufferView(e))return e.buffer;if(r.isURLSearchParams(e))return f(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();if(c){if(-1!==i.indexOf("application/x-www-form-urlencoded"))return u(e,this.formSerializer).toString();if((n=r.isFileList(e))||i.indexOf("multipart/form-data")>-1){var d=this.env&&this.env.FormData;return a(n?{"files[]":e}:e,d&&new d,this.formSerializer)}}return c||o?(f(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(0,JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||g.transitional,n=t&&t.forcedJSONParsing,s="json"===this.responseType;if(e&&r.isString(e)&&(n&&!this.responseType||s)){var o=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw i.from(e,i.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:c.classes.FormData,Blob:c.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){g.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){g.headers[e]=r.merge(d)})),e.exports=g},896:e=>{"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},786:(e,t,n)=>{e.exports=n(894)},641:e=>{e.exports={version:"0.28.1"}},170:(e,t,n)=>{"use strict";var r=n(440);function s(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,(function(e){return t[e]}))}function i(e,t){this._pairs=[],e&&r(e,this,t)}var o=i.prototype;o.append=function(e,t){this._pairs.push([e,t])},o.toString=function(e){var t=e?function(t){return e.call(this,t,s)}:s;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")},e.exports=i},12:e=>{"use strict";e.exports=function(e,t){return function(){return e.apply(t,arguments)}}},106:(e,t,n)=>{"use strict";var r=n(516),s=n(170);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o));var a,u=n&&n.encode||i,c=n&&n.serialize;return(a=c?c(t,n):r.isURLSearchParams(t)?t.toString():new s(t,n).toString(u))&&(e+=(-1===e.indexOf("?")?"?":"&")+a),e}},680:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},948:(e,t,n)=>{"use strict";var r=n(516);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,s,i,o){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(s)&&a.push("path="+s),r.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},298:(e,t,n)=>{"use strict";var r=n(516);e.exports=function(e){function t(e,n,s,i){var o=e[i++],a=Number.isFinite(+o),u=i>=e.length;return o=!o&&r.isArray(s)?s.length:o,u?(r.hasOwnProperty(s,o)?s[o]=[s[o],n]:s[o]=n,!a):(s[o]&&r.isObject(s[o])||(s[o]=[]),t(e,n,s[o],i)&&r.isArray(s[o])&&(s[o]=function(e){var t,n,r={},s=Object.keys(e),i=s.length;for(t=0;t<i;t++)r[n=s[t]]=e[n];return r}(s[o])),!a)}if(r.isFormData(e)&&r.isFunction(e.entries)){var n={};return r.forEachEntry(e,(function(e,s){t(function(e){return r.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),s,n,0)})),n}return null}},137:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},19:(e,t,n)=>{"use strict";var r=n(516);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},202:(e,t,n)=>{"use strict";var r=n(516);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function s(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=s(window.location.href),function(t){var n=r.isString(t)?s(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},18:(e,t,n)=>{"use strict";var r=n(516);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},631:(e,t,n)=>{"use strict";var r=n(516),s=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,o={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.slice(0,i)).toLowerCase(),n=r.trim(e.slice(i+1)),t){if(o[t]&&s.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},656:e=>{"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},980:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},440:(e,t,n)=>{"use strict";var r=n(516),s=n(845),i=n(786);function o(e){return r.isPlainObject(e)||r.isArray(e)}function a(e){return r.endsWith(e,"[]")?e.slice(0,-2):e}function u(e,t,n){return e?e.concat(t).map((function(e,t){return e=a(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var c=r.toFlatObject(r,{},null,(function(e){return/^is[A-Z]/.test(e)}));e.exports=function(e,t,n){if(!r.isObject(e))throw new TypeError("target must be an object");t=t||new(i||FormData);var l,d=(n=r.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!r.isUndefined(t[e])}))).metaTokens,f=n.visitor||v,p=n.dots,g=n.indexes,h=(n.Blob||"undefined"!=typeof Blob&&Blob)&&(l=t)&&r.isFunction(l.append)&&"FormData"===l[Symbol.toStringTag]&&l[Symbol.iterator];if(!r.isFunction(f))throw new TypeError("visitor must be a function");function m(e){if(null===e)return"";if(r.isDate(e))return e.toISOString();if(!h&&r.isBlob(e))throw new s("Blob is not supported. Use a Buffer instead.");return r.isArrayBuffer(e)||r.isTypedArray(e)?h&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function v(e,n,s){var i=e;if(e&&!s&&"object"==typeof e)if(r.endsWith(n,"{}"))n=d?n:n.slice(0,-2),e=JSON.stringify(e);else if(r.isArray(e)&&function(e){return r.isArray(e)&&!e.some(o)}(e)||r.isFileList(e)||r.endsWith(n,"[]")&&(i=r.toArray(e)))return n=a(n),i.forEach((function(e,s){!r.isUndefined(e)&&t.append(!0===g?u([n],s,p):null===g?n:n+"[]",m(e))})),!1;return!!o(e)||(t.append(u(s,n,p),m(e)),!1)}var y=[],w=Object.assign(c,{defaultVisitor:v,convertValue:m,isVisitable:o});if(!r.isObject(e))throw new TypeError("data must be an object");return function e(n,s){if(!r.isUndefined(n)){if(-1!==y.indexOf(n))throw Error("Circular reference detected in "+s.join("."));y.push(n),r.forEach(n,(function(n,i){!0===(!r.isUndefined(n)&&f.call(t,n,r.isString(i)?i.trim():i,s,w))&&e(n,s?s.concat(i):[i])})),y.pop()}}(e),t}},69:(e,t,n)=>{"use strict";var r=n(516),s=n(440),i=n(721);e.exports=function(e,t){return s(e,new i.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,s){return i.isNode&&r.isBuffer(e)?(this.append(t,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}},841:(e,t,n)=>{"use strict";var r=n(641).version,s=n(845),i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,a){if(!1===e)throw new s(i(r," has been removed"+(t?" in "+t:"")),s.ERR_DEPRECATED);return t&&!o[r]&&(o[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,a)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new s("options must be an object",s.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],a=t[o];if(a){var u=e[o],c=void 0===u||a(u,o,e);if(!0!==c)throw new s("option "+o+" must be "+c,s.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new s("Unknown option "+o,s.ERR_BAD_OPTION)}},validators:i}},243:e=>{"use strict";e.exports=FormData},2:(e,t,n)=>{"use strict";var r=n(170);e.exports="undefined"!=typeof URLSearchParams?URLSearchParams:r},109:(e,t,n)=>{"use strict";e.exports={isBrowser:!0,classes:{URLSearchParams:n(2),FormData:n(243),Blob},protocols:["http","https","file","blob","url","data"]}},721:(e,t,n)=>{"use strict";e.exports=n(109)},516:(e,t,n)=>{"use strict";var r,s=n(12),i=Object.prototype.toString,o=(r=Object.create(null),function(e){var t=i.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())});function a(e){return e=e.toLowerCase(),function(t){return o(t)===e}}function u(e){return Array.isArray(e)}function c(e){return void 0===e}var l=a("ArrayBuffer");function d(e){return"number"==typeof e}function f(e){return null!==e&&"object"==typeof e}function p(e){if("object"!==o(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var g=a("Date"),h=a("File"),m=a("Blob"),v=a("FileList");function y(e){return"[object Function]"===i.call(e)}var w=a("URLSearchParams");function b(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),u(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)}var x,E,S=(x="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return x&&e instanceof x}),R=a("HTMLFormElement"),O=(E=Object.prototype.hasOwnProperty,function(e,t){return E.call(e,t)});e.exports={isArray:u,isArrayBuffer:l,isBuffer:function(e){return null!==e&&!c(e)&&null!==e.constructor&&!c(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||i.call(e)===t||y(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&l(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:d,isObject:f,isPlainObject:p,isEmptyObject:function(e){return e&&0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype},isUndefined:c,isDate:g,isFile:h,isBlob:m,isFunction:y,isStream:function(e){return f(e)&&y(e.pipe)},isURLSearchParams:w,isStandardBrowserEnv:function(){var e;return("undefined"==typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:b,merge:function e(){var t={};function n(n,r){p(t[r])&&p(n)?t[r]=e(t[r],n):p(n)?t[r]=e({},n):u(n)?t[r]=n.slice():t[r]=n}for(var r=0,s=arguments.length;r<s;r++)b(arguments[r],n);return t},extend:function(e,t,n){return b(t,(function(t,r){e[r]=n&&"function"==typeof t?s(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var s,i,o,a={};if(t=t||{},null==e)return t;do{for(i=(s=Object.getOwnPropertyNames(e)).length;i-- >0;)o=s[i],r&&!r(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:o,kindOfTest:a,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(u(e))return e;var t=e.length;if(!d(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:S,isFileList:v,forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var s=n.value;t.call(e,s[0],s[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:R,hasOwnProperty:O}},894:e=>{e.exports="object"==typeof self?self.FormData:window.FormData},548:(e,t,n)=>{"use strict";n.d(t,{A:()=>ve});class r{on(e,t){var n=this[e];n?n.push(t):this[e]=[t]}dispatch(e,t){var n=this[e];n&&n.forEach((e=>e(t)))}}function s(e){ve.config.logging&&console.log(`Gist: ${e}`)}var i,o=new Uint8Array(16);function a(){if(!i&&!(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(o)}const u=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var c=[],l=0;l<256;++l)c.push((l+256).toString(16).substr(1));const d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&u.test(e)}(n))throw TypeError("Stringified UUID is invalid");return n},f=function(e,t,n){var r=(e=e||{}).random||(e.rng||a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var s=0;s<16;++s)t[n+s]=r[s];return t}return d(r)},p=365,g="gist.web.isPersistingSession";function h(e,t,n=null){var r=n;r||(r=new Date).setDate(r.getDate()+p);const s={value:t,expiry:r};w().setItem(e,JSON.stringify(s))}function m(e){const t=w().getItem(e);if(!t)return null;const n=JSON.parse(t);return(new Date).getTime()>new Date(n.expiry).getTime()?(v(e),null):n.value}function v(e){w().removeItem(e)}function y(){const e=sessionStorage.getItem(g);return null===e?(sessionStorage.setItem(g,"true"),!0):"true"===e}function w(){return y()?localStorage:sessionStorage}var b=n(505),x=n.n(b);const E={ENGINE_API_ENDPOINT:{prod:"https://engine.api.gist.build",dev:"https://engine.api.dev.gist.build",local:"http://engine.api.local.gist.build:82"},GIST_QUEUE_API_ENDPOINT:{prod:"https://gist-queue-consumer-api.cloud.gist.build",dev:"https://gist-queue-consumer-api.cloud.dev.gist.build",local:"http://api.local.gist.build:86"},GIST_VIEW_ENDPOINT:{prod:"https://renderer.gist.build/2.0",dev:"https://renderer.gist.build/2.0",local:"http://app.local.gist.build:8080/web"}};function S(){var e=x().create({baseURL:E.GIST_QUEUE_API_ENDPOINT[ve.config.env],timeout:2e4});e.defaults.headers.common["X-CIO-Site-Id"]=ve.config.siteId,e.defaults.headers.common["X-CIO-Client-Platform"]="web";var t=C();return null!=t&&(e.defaults.headers.common["X-Gist-Encoded-User-Token"]=btoa(t)),e}const R="gist.web.userLocale";var O=600,I=!1;const T="gist.web.userQueueNextPullCheck";const A="gist.web.userToken",D="gist.web.usingGuestUserToken",$="gist.web.guestUserToken";function P(){return null!==m(D)}function C(){return m(A)}function N(){if(null===C()){var e=m($);null==e&&(e=f(),h($,e),s(`Set guest user token "${e}" with expiry date set to 1 year from today`)),h(A,e),h(D,!0),s(`Using anonymous session with token: "${e}"`)}}async function j(){var e=C();return null===e?null:await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(e)}function k(e){var t="",n="",r="",s=!1,i=!1,o=!1,a=!1,u=null,c=!1,l="#00000033",d=414,f=!1;return e.properties&&e.properties.gist&&(e.properties.gist.campaignId&&(u=e.properties.gist.campaignId),e.properties.gist.elementId&&(t=e.properties.gist.elementId,s=!0),e.properties.gist.routeRuleWeb&&(n=e.properties.gist.routeRuleWeb,i=!0),e.properties.gist.position&&(r=e.properties.gist.position,o=!0),e.properties.gist.scale&&(a=e.properties.gist.scale),e.properties.gist.overlayColor&&(l=e.properties.gist.overlayColor),e.properties.gist.messageWidth&&e.properties.gist.messageWidth>0&&(d=e.properties.gist.messageWidth,f=!0),e.properties.gist.persistent&&(c=!0)),{isEmbedded:s,elementId:t,hasRouteRule:i,routeRule:n,position:r,hasPosition:o,shouldScale:a,campaignId:u,messageWidth:d,overlayColor:l,persistent:c,hasCustomWidth:f}}var U=["x-gist-top","x-gist-floating-top","x-gist-bottom","x-gist-floating-bottom","x-gist-floating-bottom-left","x-gist-floating-bottom-right","x-gist-floating-top-left","x-gist-floating-top-right"];const L=e=>new Promise((t=>setTimeout(t,e))),_=["x-gist-top","x-gist-bottom","x-gist-floating-top","x-gist-floating-bottom"];function B(e){var t=W(e);if(t)return t.style&&t.style.height&&"0px"!=t.style.height}function F(){var e=document.querySelector("#gist-embed-message");e&&e.parentNode.removeChild(e)}function q(e){return`gist-${e}`}function M(){var e=document.querySelector(".gist-message");e&&e.classList.add("visible")}function W(e){try{return document.querySelector(`#${e}`)||null}catch{return null}}const V="gist.web.message.broadcasts";function H(e){return e.properties&&e.properties.gist&&e.properties.gist.broadcast}async function z(){const e=await j();return e?`${V}.${e}`:null}function J(e,t){return`${e}.${t}.numberOfTimesShown`}function G(e,t){return`${e}.${t}.shouldShow`}const X="gist.web.message.user";async function Q(){const e=await j();return e?`${X}.${e}`:null}async function K(){const e=await j();return e?`${X}.${e}.seen`:null}async function Y(e){if(ve.isDocumentVisible){if(ve.overlayInstanceId)return s(`Message ${ve.overlayInstanceId} already showing.`),null;var t=k(e);return e.instanceId=f(),e.overlay=!0,e.firstLoad=!0,e.shouldResizeHeight=!0,e.shouldScale=t.shouldScale,e.renderStartTime=(new Date).getTime(),ve.overlayInstanceId=e.instanceId,ve.currentMessages.push(e),se(e)}return s("Document hidden, not showing message now."),null}async function Z(e,t){return ve.isDocumentVisible?(e.instanceId=f(),e.overlay=!1,e.firstLoad=!0,e.shouldScale=!1,e.elementId=t,e.shouldResizeHeight=!B(t),e.renderStartTime=(new Date).getTime(),ve.currentMessages.push(e),se(e,t)):(s("Document hidden, not showing message now."),null)}async function ee(e){e?(ve.messageDismissed(e),e.overlay?await re(!0,e):ne(e)):s(`Message with instance id: ${instanceId} not found`)}async function te(e){var t=k(e);e?t.persistent&&(s("Persistent message dismissed, logging view"),await de(e),await ie(e)):s(`Message with instance id: ${instanceId} not found`)}function ne(e){var t;ae(e.instanceId),(t=W(e.elementId))&&(t.classList.remove("gist-visible"),t.style.removeProperty("height"),t.innerHTML="")}async function re(e,t){ae(t.instanceId),ve.overlayInstanceId=null,e?await async function(){var e=document.querySelector(".gist-message");e&&(e.classList.remove("visible"),await L(300)),F()}():F(),0==ve.currentMessages.length&&(window.removeEventListener("message",le),window.removeEventListener("touchstart",ce))}function se(e,t=null){if(t&&function(e){var t=W(e);return!(!t||!t.classList.contains("gist-visible"))}(t))return s(`Message ${e.messageId} already showing in element ${t}.`),null;var n,r,i={endpoint:E.ENGINE_API_ENDPOINT[ve.config.env],siteId:ve.config.siteId,dataCenter:ve.config.dataCenter,messageId:e.messageId,instanceId:e.instanceId,livePreview:!1,properties:e.properties},o=`${E.GIST_VIEW_ENDPOINT[ve.config.env]}/index.html?options=${n=JSON.stringify(i),r=btoa(encodeURIComponent(n).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)}))),encodeURIComponent(r)}`;return window.addEventListener("message",le),window.addEventListener("touchstart",ce),t?(U.includes(t)&&function(e){const t=document.createElement("div");t.id=e,"x-gist-top"===e?document.body.insertBefore(t,document.body.firstChild):document.body.insertAdjacentElement("beforeend",t),s("Top & bottom elements injected into page")}(t),function(e,t,n){var r=W(e);if(r){r.classList.add(q(n.instanceId));var i=k(n),o=i.messageWidth+"px";_.includes(e)&&!i.hasCustomWidth&&(o="100%"),U.includes(e)&&(r.style.width=o),B(e)||(r.style.height="0px"),r.innerHTML=function(e,t,n){var r=function(e,t,n){var r=800;return t.messageWidth>r&&(r=t.messageWidth),`\n    <div id="gist-embed">\n        <style>\n            #x-gist-floating-top, #x-gist-floating-top-left, #x-gist-floating-top-right {\n                position: fixed;\n                top: 0px;\n                z-index: 1000000;\n            }\n            #x-gist-floating-bottom, #x-gist-floating-bottom-left, #x-gist-floating-bottom-right {\n                position: fixed;\n                bottom: 0px;\n                z-index: 1000000;\n            }\n            #x-gist-bottom, #x-gist-top, #x-gist-floating-top, #x-gist-floating-bottom {\n                left: 50%;\n                transform: translate(-50%, 0%);\n            }\n            #x-gist-floating-top-right, #x-gist-floating-bottom-right {\n                right: 0px;\n            }\n            #gist-embed {\n                position: relative;\n                height: 100%;\n                width: 100%;\n            }\n            #gist-embed-container {\n                position: relative;\n                height: 100%;\n                width: 100%;\n            }\n            #gist-embed-container .gist-frame {\n                height: 100%;\n                width: 100%;\n                border: none;\n            }\n            #x-gist-top.${e},\n            #x-gist-bottom.${e},\n            #x-gist-floating-top.${e},\n            #x-gist-floating-bottom.${e},\n            #x-gist-floating-top-left.${e},\n            #x-gist-floating-top-right.${e},\n            #x-gist-floating-bottom-left.${e},\n            #x-gist-floating-bottom-right.${e} {\n                transition: height 0.1s ease-in-out;\n            }\n            @media (max-width: ${r}px) {\n                #x-gist-top.${e},\n                #x-gist-bottom.${e},\n                #x-gist-floating-top.${e},\n                #x-gist-floating-bottom.${e},\n                #x-gist-floating-top-left.${e},\n                #x-gist-floating-top-right.${e},\n                #x-gist-floating-bottom-left.${e},\n                #x-gist-floating-bottom-right.${e} {\n                    width: 100% !important;\n                }\n            }\n        </style>\n        <div id="gist-embed-container">\n            <iframe id="${e}" class="gist-frame" src="${n}"></iframe>\n        </div>\n    </div>`}(q(t.instanceId),n,e);return r}(t,n,i)}else s(`Message could not be embedded, elementId ${e} not found.`)}(t,o,e)):function(e,t){document.body.insertAdjacentHTML("afterbegin",function(e,t){var n=k(t),r=function(e,t,n){var r=600;return t.messageWidth>r&&(r=t.messageWidth),`\n    <div id="gist-embed-message">\n        <style>\n            #gist-overlay.background {\n                position: fixed;\n                z-index: 9999999998;\n                left: 0;\n                top: 0;\n                width: 100%;\n                height: 100%;\n                background-color: ${t.overlayColor};\n                visibility: hidden;\n            }\n            #gist-overlay.background.visible {\n                visibility: visible;\n            }\n            #gist-overlay.background.is-blacked-out {\n                display: block;\n            }\n            .gist-message {\n                width: ${t.messageWidth}px;\n                position: absolute;\n                border: none;\n                opacity: 0;\n                transition: opacity 0.3s ease-in-out, height 0.1s ease-in-out;\n                z-index: 9999999999;\n                left: 50%;\n                transform: translateX(-50%);\n            }\n            .gist-message.visible {\n                opacity: 1;\n                pointer-events: auto;\n            }\n            .gist-message.center {\n                transform: translate(-50%, -50%);\n                top: 50%;\n            }\n            .gist-message.bottom {\n                bottom: 0;\n            }\n            .gist-message.top {\n                top: 0;\n            }\n            @media (max-width: ${r}px) {\n                .gist-message {\n                    width: 100%;\n                }\n            }\n        </style>\n        <div id="gist-overlay" class="background">\n            <iframe id="${e}" class="gist-message" src="${n}"></iframe>\n        </div>\n    </div>`}(q(t.instanceId),n,e);return r}(e,t))}(o,e),e}async function ie(e){s(`Message shown, logging view for: ${e.messageId}`);var t={};null!=e.queueId?(await de(e),t=await async function(e){try{return await S().post(`/api/v1/logs/queue/${e}`)}catch(e){return e.response}}(e.queueId)):t=await async function(e){try{return await S().post(`/api/v1/logs/message/${e}`)}catch(e){return e.response}}(e.messageId),200===t.status?s("Message view logged"):s(`Problem logging message: ${t.status}`)}function oe(e){return ve.currentMessages.find((t=>t.instanceId===e))}function ae(e){ve.currentMessages=ve.currentMessages.filter((t=>t.instanceId!==e))}function ue(e,t){ae(e),ve.currentMessages.push(t)}function ce(e){}async function le(e){if(e.data.gist){var t=e.data.gist.instanceId,n=oe(t);if(!n)return;var r=k(n);switch(e.data.gist.method){case"routeLoaded":var i=.001*((new Date).getTime()-n.renderStartTime);s(`Engine render for message: ${n.messageId} timer elapsed in ${i.toFixed(3)} seconds`),n.currentRoute=e.data.gist.parameters.route,n.firstLoad&&(n.overlay?function(e){var t=document.querySelector("#gist-overlay");if(t){t.classList.add("visible");var n=document.querySelector(".gist-message");e.position?n.classList.add(e.position):n.classList.add("center"),setTimeout(M,100)}else F()}(n):(d=W(n.elementId))&&d.classList.add("gist-visible"),ve.messageShown(n),r.persistent?s("Persistent message shown, skipping logging view"):await ie(n),n.firstLoad=!1),ue(t,n);break;case"tap":var o=e.data.gist.parameters.action,a=e.data.gist.parameters.name;if(ve.messageAction(n,o,a),e.data.gist.parameters.system&&!r.persistent){await ee(n);break}try{if((l=new URL(o))&&"gist:"===l.protocol)switch(l.href.replace("gist://","").split("?")[0]){case"close":await ee(n),await te(n),await async function(e){H(e)&&(s(`Logging broadcast dismissed locally for: ${e.queueId}`),await async function(e){s(`Marking broadcast ${e} as dismissed.`);const t=await z();t&&(h(G(t,e),!1),s(`Marked broadcast ${e} as dismissed and will not show again.`))}(e.queueId))}(n),await he();break;case"showMessage":var u=l.searchParams.get("messageId"),c=l.searchParams.get("properties");u&&(c&&(c=JSON.parse(atob(c))),await ve.showMessage({messageId:u,properties:c}));break;case"loadPage":var l;(l=l.href.substring(l.href.indexOf("?url=")+5))&&(l.startsWith("https://")||l.startsWith("http://")||l.startsWith("/")?window.location.href=l:window.location.href=window.location+l)}}catch(e){}break;case"routeChanged":n.currentRoute=e.data.gist.parameters.route,n.renderStartTime=(new Date).getTime(),ue(t,n),s(`Route changed to: ${n.currentRoute}`);break;case"sizeChanged":s(`Size Changed Width: ${e.data.gist.parameters.width} - Height: ${e.data.gist.parameters.height}`),n.elementId&&!n.shouldResizeHeight||function(e,t){var n=W(e.elementId?e.elementId:q(e.instanceId));if(n){var r=n.style;if(t.height>0)if(t.height>window.innerHeight){var s=1-(t.height/window.innerHeight-1);e.shouldScale&&s>=.4?(r.height=`${t.height}px`,r.transform=`translateX(-50%) translateY(-50%) scale(${s})`):r.height=`${window.innerHeight}px`}else r.height=`${t.height}px`}}(n,e.data.gist.parameters);break;case"titleChanged":s(`Overlay title changed to: ${e.data.gist.parameters.title}`),function(e,t){var n=W(q(e));n&&(n.title=t)}(t,e.data.gist.parameters.title);break;case"eventDispatched":ve.events.dispatch("eventDispatched",{name:e.data.gist.parameters.name,payload:e.data.gist.parameters.payload});break;case"error":case"routeError":ve.messageError(n),ve.overlayInstanceId?re(!1,n):ne(n)}}var d}async function de(e){s(`Logging user message view locally for: ${e.queueId}`),H(e)?await async function(e){s(`Marking broadcast ${e} as seen.`);const t=await z();if(!t)return;const n=await async function(e,t){return m(e).find((e=>e.queueId===t))}(t,e);if(!n)return;const{broadcast:r}=n.properties.gist,i=J(t,e),o=G(t,e);let a=m(i)||0;if(h(i,a+1),1===r.frequency.count)h(o,!1),s(`Marked broadcast ${e} as seen.`);else{let t=new Date;t.setSeconds(t.getSeconds()+r.frequency.delay),h(o,!1,t),s(`Marked broadcast ${e} as seen, broadcast was seen ${a+1} times, next show date is ${t}.`)}}(e.queueId):await async function(e){const t=await K();if(!t)return;const n=m(t)??[];n.push(e),h(t,n)}(e.queueId)}var fe=(e,t)=>e().then((e=>new Promise((t=>setTimeout(t,e))))(t).then((()=>fe(e,t)))),pe=!1;async function ge(){pe?he():(async function(){var e=`G${f().substring(0,8)}`,t=document.createElement("div");t.setAttribute("id",e),t.style.display="none",document.body.appendChild(t),await L(5e3),Z({messageId:""},e)}(),C()?(s("Queue watcher started"),pe=!0,fe((()=>new Promise((()=>async function(){if(C())if(ve.isDocumentVisible)if(null===m(T)){var e=await async function(){var e;try{if(!I){var t=(new Date).getTime();I=!0;var n={"X-Gist-User-Anonymous":P(),"Content-Language":null!==m(R)?m(R):navigator.language};e=await S().post(`/api/v2/users?timestamp=${t}`,{},{headers:n})}}catch(t){t.response?e=t.response:s(`Error getting user queue: ${t}`)}finally{return I=!1,function(e){if(e&&e.headers){var t=e.headers["x-gist-queue-polling-interval"];t&&t>0&&(O=t)}var n=new Date((new Date).getTime()+1e3*O);h(T,O,n)}(e),e}}(),t=[];e?(200===e.status||204===e.status?(s("200 response, updating local store."),async function(e){const t=await Q();t&&h(t,e.filter((e=>!(e.properties&&e.properties.gist&&e.properties.gist.broadcast))),new Date(Date.now()+36e5))}(t=e.data),async function(e){const t=await z();if(!t)return;const n=new Date;n.setDate(n.getDate()+30),h(t,e.filter(H),n)}(t)):304===e.status&&s("304 response, using local store."),await he()):s("There was an error while checking message queue.")}else s("Next queue pull scheduled for later.");else s("Document not visible, skipping queue check.");else s("User token reset, skipping queue check.")}()))),1e3)):s("User token not setup, queue not started."))}async function he(){var e=await async function(){const e=await z();return e?(m(e)??[]).filter((t=>{const{broadcast:n}=t.properties.gist,r=m(G(e,t.queueId))??!0,s=m(J(e,t.queueId))||0,i=0===n.frequency.count;return r&&(i||s<n.frequency.count)})):[]}(),t=await async function(){const e=await Q();if(!e)return[];const t=m(e)??[],n=await async function(){const e=await K();return e?m(e)??[]:[]}();return t.filter((e=>!n.includes(e.queueId)))}(),n=e.concat(t);s(`Messages in local queue: ${n.length}`);var r=n.sort(((e,t)=>e.priority-t.priority));for(const e of r)await me(e)}async function me(e){var t=k(e);if(t.hasRouteRule){var n=ve.currentRoute;null==n&&(n=new URL(window.location.href).pathname);var r=t.routeRule;if(s(`Verifying route against rule: ${r}`),!new RegExp(r).test(n))return s(`Route ${n} does not match rule.`),!1}return t.hasPosition&&(e.position=t.position),t.isEmbedded?await Z(e,t.elementId):await Y(e)}const ve=class{static async setup(e){this.events=new r,this.config={useAnonymousSession:void 0!==e.useAnonymousSession&&e.useAnonymousSession,siteId:e.siteId,dataCenter:e.dataCenter,env:void 0===e.env?"prod":e.env,logging:void 0!==e.logging&&e.logging,experiments:void 0!==e.experiments&&e.experiments},this.currentMessages=[],this.overlayInstanceId=null,this.currentRoute=null,this.isDocumentVisible=!0,this.config.isPreviewSession=function(){const e=new URLSearchParams(window.location.search).get("cioPreviewId");return e&&(sessionStorage.setItem(g,!1),ve.setUserToken(e),s(`Preview mode enabled with user token: ${e}`)),!y()}(),s(`Setup complete on ${this.config.env} environment.`),!this.config.isPreviewSession&&this.config.useAnonymousSession&&N(),await ge(),document.addEventListener("visibilitychange",(async()=>{"hidden"===document.visibilityState?this.isDocumentVisible=!1:(this.isDocumentVisible=!0,await he())}),!1)}static async setCurrentRoute(e){this.currentRoute=e,s(`Current route set to: ${e}`),await he()}static async setUserToken(e,t){this.config.isPreviewSession||(function(e,t){void 0===t&&(t=new Date).setDate(t.getDate()+30),h(A,e,t),P()&&(v(T),v(D)),s(`Set user token "${e}" with expiry date set to ${t}`)}(e,t),await ge())}static setUserLocale(e){var t;h(R,t=e),s(`Set user locate to "${t}"`)}static async clearUserToken(){this.config.isPreviewSession||(v(A),s("Cleared user token"),this.config.useAnonymousSession&&N(),await ge())}static async dismissMessage(e){var t=oe(e);await ee(t),await te(t),await he()}static async embedMessage(e,t){var n=await Z(e,t);return n?n.instanceId:null}static async showMessage(e){var t=await Y(e);return t?t.instanceId:null}static messageShown(e){s(`Message shown: ${e.messageId}`),this.events.dispatch("messageShown",e)}static messageDismissed(e){null!==e&&(s(`Message dismissed: ${e.messageId}`),this.events.dispatch("messageDismissed",e))}static messageError(e){s(`Message error: ${e.messageId}`),this.events.dispatch("messageError",e)}static messageAction(e,t,n){s(`Message action: ${e.currentRoute}, ${t} with name ${n} on ${e.instanceId}`),this.events.dispatch("messageAction",{message:e,action:t,name:n})}}},44:(e,t,n)=>{const r=n(548).A;e.exports=r}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}return n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(44)})()));